---
title: 2. Elementos B√°sicos de un Diagrama de Secuencia
description: Objetos, l√≠neas de vida, mensajes y activaciones en los diagramas de secuencia UML
---

import { Code } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Badge } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';
import { Steps } from '@astrojs/starlight/components';
import PlantUml from "@components/PlantUml.astro";

## üß© Elementos constitutivos del diagrama de secuencia

Los diagramas de secuencia est√°n compuestos por elementos gr√°ficos estandarizados que representan participantes, interacciones y flujos de control. A continuaci√≥n se describen los componentes fundamentales.

## üë§ Actores

Los actores representan entidades externas que interact√∫an con el sistema. Pueden ser usuarios humanos, sistemas externos o dispositivos que inician o participan en las interacciones sin formar parte de la implementaci√≥n interna.

<PlantUml code={`@startuml
actor Usuario
actor "Sistema Externo" as SysExt
participant "Sistema Interno" as SysInt

Usuario -> SysInt : Solicitud
SysInt -> SysExt : Consulta externa
SysExt --> SysInt : Respuesta
SysInt --> Usuario : Resultado

note right of Usuario
  Actor: Entidad externa
  que interact√∫a con el sistema
end note
@enduml`} />

**Caracter√≠sticas clave:**
- Representan roles, no personas espec√≠ficas
- Son externos al sistema modelado
- Inician o consumen funcionalidades del sistema

## üì¶ Objetos

Los objetos son instancias de clases que participan en la interacci√≥n. Representan componentes internos del sistema que colaboran para cumplir funcionalidades espec√≠ficas.

### Tipos de objetos seg√∫n su rol

<PlantUml code={`@startuml
participant "Controlador" as Controller
boundary "Interfaz" as UI
control "Gestor" as Manager
entity "Entidad" as Entity
database "Base de Datos" as DB
collections "Lista" as List
queue "Cola" as Queue

note over Controller, UI
  Boundary: Interfaz con el exterior
  Control: Coordinaci√≥n de l√≥gica
end note

note over Manager, Entity
  Entity: Datos del dominio
  Database: Persistencia
end note

note over List, Queue
  Collections: Conjuntos de datos
  Queue: Mensajer√≠a as√≠ncrona
end note
@enduml`} />

<Tabs>
  <TabItem label="Boundary">
    **Definici√≥n:** Objetos de frontera que gestionan la interacci√≥n con el exterior.
    
    **Ejemplos:** Formularios web, endpoints API, interfaces gr√°ficas.
  </TabItem>
  
  <TabItem label="Control">
    **Definici√≥n:** Objetos que coordinan y controlan el flujo de la l√≥gica de negocio.
    
    **Ejemplos:** Controladores, coordinadores, gestores de transacciones.
  </TabItem>
  
  <TabItem label="Entity">
    **Definici√≥n:** Objetos que representan conceptos del dominio con datos persistentes.
    
    **Ejemplos:** Cliente, Pedido, Producto, Usuario.
  </TabItem>
  
  <TabItem label="Database">
    **Definici√≥n:** Sistemas de almacenamiento de datos.
    
    **Ejemplos:** MySQL, PostgreSQL, MongoDB, Redis.
  </TabItem>
</Tabs>

<Aside type="tip" title="üí° Distinci√≥n clave">
**Actor vs Objeto:** El actor es externo al sistema; el objeto es interno y parte de su implementaci√≥n.
</Aside>

## ‚è±Ô∏è L√≠nea de vida (Lifeline)

La l√≠nea de vida representa la existencia temporal de un participante durante la interacci√≥n. Se visualiza como una l√≠nea vertical discontinua que indica que el participante est√° disponible para recibir mensajes.

<PlantUml code={`@startuml
participant "Objeto A" as A
participant "Objeto B" as B

A -> B : Mensaje
B --> A : Respuesta

note over A, B
  Las l√≠neas verticales discontinuas
  son las l√≠neas de vida
end note
@enduml`} />

### Creaci√≥n y destrucci√≥n de objetos

<Tabs>
  <TabItem label="Creaci√≥n">
    <PlantUml code={`@startuml
participant "F√°brica" as Factory
participant "Producto" as Product

Factory -> Product ** : crear()
note right of Product
  ** indica creaci√≥n del objeto
end note

Factory -> Product : configurar()
Product --> Factory : OK
@enduml`} />
    
    El s√≠mbolo `**` indica que el objeto es instanciado en ese momento.
  </TabItem>
  
  <TabItem label="Destrucci√≥n">
    <PlantUml code={`@startuml
participant "Gestor" as Manager
participant "Recurso" as Resource

Manager -> Resource ** : crear()
Manager -> Resource : utilizar()
Resource --> Manager : Resultado
Manager -> Resource !! : destruir()

note right of Resource
  !! indica destrucci√≥n (X)
end note
@enduml`} />
    
    El s√≠mbolo `!!` indica que el objeto es destruido. La l√≠nea de vida termina con una "X".
  </TabItem>
</Tabs>

<Aside type="note" title="üìå Nota importante">
La longitud de la l√≠nea de vida no representa duraci√≥n real, sino el orden relativo de los eventos.
</Aside>

## üí¨ Mensajes

Los mensajes representan la comunicaci√≥n entre participantes. Son el elemento central del diagrama, modelando las interacciones que definen el comportamiento del sistema.

### Tipos de mensajes

<PlantUml code={`@startuml
participant "Emisor" as A
participant "Receptor" as B

A -> B : S√≠ncrono (espera respuesta)
A ->> B : As√≠ncrono (no espera)
A --> B : Retorno
A -> B ** : Creaci√≥n
A -> B !! : Destrucci√≥n
A -> A : Auto-mensaje
@enduml`} />

<Tabs>
  <TabItem label="S√≠ncrono">
    <PlantUml code={`@startuml
participant "Cliente" as C
participant "Servidor" as S

C -> S : solicitar()
activate S
note right of C
  El cliente espera
  la respuesta
end note
S --> C : respuesta
deactivate S
@enduml`} />
    
    **Flecha:** `‚Üí` (s√≥lida)  
    **Comportamiento:** El emisor espera la respuesta antes de continuar.  
    **Uso:** Llamadas a m√©todos, consultas a BD, peticiones HTTP s√≠ncronas.
  </TabItem>
  
  <TabItem label="As√≠ncrono">
    <PlantUml code={`@startuml
participant "App" as A
queue "Cola" as Q

A ->> Q : Publicar evento
note right of A
  La app contin√∫a
  inmediatamente
end note

A -> A : Otras tareas
@enduml`} />
    
    **Flecha:** `->>` (abierta)  
    **Comportamiento:** El emisor no espera respuesta y contin√∫a.  
    **Uso:** Eventos, notificaciones, mensajer√≠a as√≠ncrona.
  </TabItem>
  
  <TabItem label="Retorno">
    <PlantUml code={`@startuml
participant "A" as A
participant "B" as B

A -> B : calcular()
activate B
B --> A : resultado = 100
deactivate B
@enduml`} />
    
    **Flecha:** `-->` (discontinua)  
    **Comportamiento:** Devuelve el resultado al emisor.  
    **Uso:** Indicar valores de retorno expl√≠citamente.
  </TabItem>
  
  <TabItem label="Auto-mensaje">
    <PlantUml code={`@startuml
participant "Procesador" as P

P -> P : validar()
activate P #LightBlue
P -> P : transformar()
activate P #DarkSalmon
deactivate P
deactivate P
@enduml`} />
    
    **Comportamiento:** El objeto se env√≠a mensajes a s√≠ mismo.  
    **Uso:** Operaciones internas, m√©todos privados.
  </TabItem>
</Tabs>

### Mensajes con par√°metros

<PlantUml code={`@startuml
participant "Cliente" as C
participant "Servicio" as S

C -> S : autenticar(email: "user@mail.com", password: "****")
activate S
S --> C : token: "abc123", expiresIn: 3600
deactivate S
@enduml`} />

<Aside type="tip" title="üí° Nomenclatura">
Use verbos en infinitivo: `calcular()`, `obtener()`, `validar()`. Incluya par√°metros cuando aporten claridad.
</Aside>

## ‚ö° Activaciones

Las activaciones representan el per√≠odo durante el cual un objeto est√° ejecutando una operaci√≥n. Se visualizan como rect√°ngulos verticales sobre la l√≠nea de vida.

<PlantUml code={`@startuml
participant "A" as A
participant "B" as B
participant "C" as C

A -> B : operaci√≥n1()
activate B
note right of B: B est√° activo

B -> C : operaci√≥n2()
activate C
note right of C: C est√° activo

C --> B : resultado
deactivate C

B --> A : resultado final
deactivate B
@enduml`} />

### Activaciones anidadas

<Tabs>
  <TabItem label="Anidaci√≥n simple">
    <PlantUml code={`@startuml
participant "Servicio" as S

S -> S : procesar()
activate S
S -> S : validar()
activate S #DarkSalmon
S -> S : normalizar()
activate S #LightBlue
deactivate S
deactivate S
deactivate S
@enduml`} />
    
    Cada nivel representa una llamada interna adicional.
  </TabItem>
  
  <TabItem label="Notaci√≥n abreviada">
    <PlantUml code={`@startuml
participant "Cliente" as C
participant "Servidor" as S

C -> S ++ : solicitud()
S -> S ++ : procesarInternamente()
return fin interno
return respuesta
@enduml`} />
    
    `++` activa, `--` desactiva autom√°ticamente.
  </TabItem>
</Tabs>

<Aside type="note" title="üìä Interpretaci√≥n">
Una activaci√≥n comienza al recibir un mensaje s√≠ncrono y termina al devolver el control.
</Aside>

## üîÄ Fragmentos de interacci√≥n

Los fragmentos de interacci√≥n modelan l√≥gica de control compleja: condicionales, bucles, paralelismo y excepciones. Cada fragmento tiene un operador que define su comportamiento.

### Tipos de fragmentos

<Tabs>
  <TabItem label="alt (Alternativa)">
    <PlantUml code={`@startuml
participant "Usuario" as U
participant "Sistema" as S

U -> S : procesarPago(monto)
activate S

alt saldo suficiente
  S -> S : debitar()
  S --> U : Pago exitoso
else saldo insuficiente
  S --> U : Pago rechazado
end

deactivate S
@enduml`} />
    
    **Uso:** Representa decisiones condicionales (if-else).  
    **Sintaxis:** `alt [condici√≥n1] ... else [condici√≥n2] ... end`
  </TabItem>
  
  <TabItem label="opt (Opcional)">
    <PlantUml code={`@startuml
participant "Sistema" as S
participant "Logger" as L

S -> S : procesarDatos()

opt modo debug activado
  S -> L : registrarLog(datos)
  L --> S : Log guardado
end

S -> S : continuarProceso()
@enduml`} />
    
    **Uso:** Ejecuci√≥n condicional de un bloque (if sin else).  
    **Sintaxis:** `opt [condici√≥n] ... end`
  </TabItem>
  
  <TabItem label="loop (Bucle)">
    <PlantUml code={`@startuml
participant "Procesador" as P
database "BD" as DB

loop para cada registro
  P -> DB : obtenerRegistro()
  DB --> P : registro
  P -> P : procesarRegistro()
end
@enduml`} />
    
    **Uso:** Representa iteraciones (for, while).  
    **Sintaxis:** `loop [condici√≥n] ... end`
  </TabItem>
  
  <TabItem label="par (Paralelo)">
    <PlantUml code={`@startuml
participant "Coordinador" as C
participant "Servicio A" as A
participant "Servicio B" as B

C -> A : iniciarTarea()
activate A

par ejecuci√≥n paralela
  A -> A : procesarA()
else
  C -> B : iniciarTarea()
  activate B
  B -> B : procesarB()
  deactivate B
end

A --> C : Resultado A
deactivate A
@enduml`} />
    
    **Uso:** Representa ejecuci√≥n concurrente.  
    **Sintaxis:** `par ... else ... end`
  </TabItem>
  
  <TabItem label="break (Interrupci√≥n)">
    <PlantUml code={`@startuml
participant "Sistema" as S
participant "Validador" as V

S -> V : validarDatos(datos)
activate V

break datos inv√°lidos
  V --> S : Error: Datos inv√°lidos
end

V -> V : procesarDatos()
V --> S : Datos v√°lidos
deactivate V
@enduml`} />
    
    **Uso:** Interrumpe el flujo normal ante una condici√≥n.  
    **Sintaxis:** `break [condici√≥n] ... end`
  </TabItem>
  
  <TabItem label="ref (Referencia)">
    <PlantUml code={`@startuml
participant "Sistema Principal" as S
participant "M√≥dulo" as M

S -> M : ejecutarProceso()
activate M

ref over M
  Diagrama de secuencia
  "Proceso de validaci√≥n"
end ref

M --> S : Proceso completado
deactivate M
@enduml`} />
    
    **Uso:** Referencia a otro diagrama de secuencia.  
    **Sintaxis:** `ref over [participantes] ... end ref`
  </TabItem>
</Tabs>

### Ejemplo integrador de fragmentos

<PlantUml code={`@startuml
actor Usuario
participant "Sistema" as S
database "BD" as DB

Usuario -> S : procesarPedidos()
activate S

opt usuario autenticado
  S -> DB : obtenerPedidos()
  activate DB
  DB --> S : listaPedidos
  deactivate DB
  
  loop para cada pedido
    S -> S : validarPedido()
    
    alt pedido v√°lido
      S -> DB : actualizarEstado()
      activate DB
      DB --> S : OK
      deactivate DB
    else pedido inv√°lido
      break error cr√≠tico
        S --> Usuario : Error: Pedido inv√°lido
      end
    end
  end
end

S --> Usuario : Pedidos procesados
deactivate S
@enduml`} />

<Aside type="tip" title="üéØ Uso de fragmentos">
Los fragmentos permiten modelar l√≥gica compleja sin perder claridad. Use `alt` para decisiones, `loop` para iteraciones, `opt` para condicionales simples y `par` para concurrencia.
</Aside>

## üìä Otros elementos relevantes

### Notas y comentarios

Las notas a√±aden informaci√≥n contextual al diagrama sin afectar la l√≥gica de interacci√≥n.

<PlantUml code={`@startuml
participant "Cliente" as C
participant "Servidor" as S

C -> S : solicitud()
note right of S
  El servidor valida
  la solicitud antes
  de procesarla
end note

S --> C : respuesta

note over C, S
  Nota que abarca
  m√∫ltiples participantes
end note
@enduml`} />

### Restricciones temporales

<PlantUml code={`@startuml
participant "Cliente" as C
participant "Servidor" as S

C -> S : solicitud()
activate S
note right: Tiempo m√°ximo: 5 segundos
S --> C : respuesta
deactivate S

|||
note over C, S: Delay de 2 segundos
|||

C -> S : nuevaSolicitud()
@enduml`} />

### Agrupaci√≥n de mensajes

<PlantUml code={`@startuml
participant "A" as A
participant "B" as B

== Fase de inicializaci√≥n ==
A -> B : inicializar()
B --> A : OK

== Fase de procesamiento ==
A -> B : procesar()
B --> A : Resultado

== Fase de finalizaci√≥n ==
A -> B : finalizar()
B --> A : OK
@enduml`} />

<Aside type="note" title="üìå Resumen de elementos">
**Elementos principales:**
- **Actores y Objetos:** Participantes de la interacci√≥n
- **L√≠nea de vida:** Existencia temporal
- **Mensajes:** Comunicaci√≥n entre participantes
- **Activaciones:** Per√≠odos de ejecuci√≥n
- **Fragmentos:** L√≥gica de control compleja
- **Notas:** Informaci√≥n contextual
</Aside>

