---
title: 游댃 03. Uso b치sico en JavaScript puro
description: Aprende a utilizar Ziggy.js para generar rutas en JavaScript puro
---

import { Code } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Badge } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';

## Importar rutas con import route from 'ziggy-js'

Una vez que has instalado y configurado Ziggy en tu proyecto Laravel, puedes comenzar a utilizarlo en tu c칩digo JavaScript. El primer paso es importar la funci칩n `route` desde el paquete `ziggy-js`.

<Code code={`// Importar la funci칩n route
import route from 'ziggy-js';

// Si necesitas acceder al objeto Ziggy directamente
import { Ziggy } from './ziggy';
`} lang="js" title="Importando Ziggy en JavaScript" />

<Aside type="tip">
  Si has seguido la configuraci칩n est치ndar, el archivo <code>ziggy.js</code> se generar치 autom치ticamente en la carpeta <code>resources/js</code> cuando ejecutes <code>php artisan ziggy:generate</code>.
</Aside>

### Uso global vs. importaci칩n en m칩dulos

Existen dos formas principales de utilizar Ziggy en tu aplicaci칩n:

<Tabs>
  <TabItem label="Uso global">
    Si has configurado Ziggy para estar disponible globalmente (usando `window.route = route`), puedes usarlo directamente sin importarlo:
    
    ```js
    // En cualquier archivo JavaScript
    const url = route('users.index');
    ```
    
    Esta es la forma m치s sencilla y es ideal para aplicaciones m치s peque침as o cuando no est치s utilizando un sistema de m칩dulos.
  </TabItem>
  
  <TabItem label="Importaci칩n en m칩dulos">
    Para aplicaciones m치s grandes o cuando est치s utilizando un sistema de m칩dulos, es mejor importar la funci칩n `route` donde la necesites:
    
    ```js
    // En un m칩dulo espec칤fico
    import route from 'ziggy-js';
    
    export function getUserProfileUrl(userId) {
      return route('users.profile', { id: userId });
    }
    ```
    
    Este enfoque es m치s modular y facilita las pruebas unitarias.
  </TabItem>
</Tabs>

## Acceder a rutas con route('nombre.ruta')

La forma m치s b치sica de utilizar Ziggy es llamar a la funci칩n `route()` con el nombre de la ruta que deseas generar.

<Code code={`// Generar una URL para la ruta 'home'
const homeUrl = route('home');
// Resultado: 'https://miapp.com/'

// Generar una URL para la ruta 'dashboard'
const dashboardUrl = route('dashboard');
// Resultado: 'https://miapp.com/dashboard'

// Generar una URL para una ruta con nombre compuesto
const adminSettingsUrl = route('admin.settings');
// Resultado: 'https://miapp.com/admin/settings'
`} lang="js" title="Acceso b치sico a rutas" />

### Verificar si una ruta existe

Puedes verificar si una ruta existe antes de intentar generarla:

```js
if (route().has('users.profile')) {
  // La ruta 'users.profile' existe
  const profileUrl = route('users.profile');
} else {
  // La ruta no existe, manejar el caso alternativo
  console.warn('La ruta users.profile no est치 definida');
}
```

### Listar todas las rutas disponibles

Tambi칠n puedes obtener un listado de todas las rutas disponibles:

```js
// Obtener todas las rutas disponibles
const allRoutes = route().all();
console.log(allRoutes);
```

## Generar URLs con par치metros

Muchas rutas en Laravel requieren par치metros, como IDs o slugs. Ziggy hace que sea f치cil pasar estos par치metros al generar URLs.

<Code code={`// Ruta con un par치metro
const userProfileUrl = route('users.show', 1);
// Resultado: 'https://miapp.com/users/1'

// Tambi칠n puedes usar un objeto para mayor claridad
const userProfileUrl = route('users.show', { user: 1 });
// Resultado: 'https://miapp.com/users/1'

// M칰ltiples par치metros
const commentUrl = route('posts.comments.show', { post: 5, comment: 10 });
// Resultado: 'https://miapp.com/posts/5/comments/10'
`} lang="js" title="Rutas con par치metros" />

### Par치metros de consulta (query string)

Puedes a침adir par치metros de consulta adicionales que no forman parte de la definici칩n de la ruta:

```js
// A침adir par치metros de consulta
const searchUrl = route('products.index', { 
  category: 'electronics',
  sort: 'price',
  order: 'asc'
});
// Resultado: 'https://miapp.com/products?category=electronics&sort=price&order=asc'

// Combinar par치metros de ruta y de consulta
const filteredUserUrl = route('users.show', { 
  user: 1,
  tab: 'settings',
  view: 'advanced'
});
// Resultado: 'https://miapp.com/users/1?tab=settings&view=advanced'
```

<Aside type="note">
  Ziggy es inteligente y sabe diferenciar entre par치metros que forman parte de la definici칩n de la ruta y par치metros adicionales que deben ir en la query string.
</Aside>

## Manejo de rutas con segmentos opcionales y comodines

Ziggy tambi칠n soporta rutas de Laravel con segmentos opcionales y comodines.

### Segmentos opcionales

En Laravel, puedes definir segmentos opcionales en tus rutas usando `?`. Ziggy maneja estos segmentos de manera intuitiva:

<Code code={`// Supongamos que tienes esta ruta en Laravel:
// Route::get('/projects/{project}/{task?}', 'ProjectController@show')->name('projects.show');

// Sin el par치metro opcional
const projectUrl = route('projects.show', { project: 123 });
// Resultado: 'https://miapp.com/projects/123'

// Con el par치metro opcional
const taskUrl = route('projects.show', { project: 123, task: 456 });
// Resultado: 'https://miapp.com/projects/123/456'
`} lang="js" title="Rutas con segmentos opcionales" />

### Comodines (Wildcards)

Las rutas con comodines en Laravel (usando `*`) tambi칠n son compatibles con Ziggy:

```js
// Supongamos que tienes esta ruta en Laravel:
// Route::get('/files/{path}', 'FileController@show')->where('path', '.*')->name('files.show');

// Acceder a un archivo en una subcarpeta
const fileUrl = route('files.show', { path: 'documents/2023/report.pdf' });
// Resultado: 'https://miapp.com/files/documents/2023/report.pdf'
```

### Rutas con restricciones (where)

Ziggy respeta las restricciones definidas en tus rutas de Laravel:

```js
// Supongamos que tienes esta ruta en Laravel con restricciones:
// Route::get('/users/{id}', 'UserController@show')
//     ->where('id', '[0-9]+')
//     ->name('users.show');

// Ziggy validar치 que el par치metro cumpla con la restricci칩n
const validUrl = route('users.show', { id: 123 });
// Resultado: 'https://miapp.com/users/123'

// Si intentas usar un valor que no cumple con la restricci칩n,
// Ziggy lanzar치 un error en modo de desarrollo
try {
  const invalidUrl = route('users.show', { id: 'abc' });
} catch (error) {
  console.error('Error:', error.message);
  // Error: El par치metro "id" para la ruta "users.show" debe coincidir con el patr칩n "[0-9]+".
}
```

## Ejemplos pr치cticos

<Tabs>
  <TabItem label="Navegaci칩n b치sica">
    ```js
    // Redireccionar a otra p치gina
    window.location.href = route('dashboard');
    
    // Usar con enlaces
    document.getElementById('profileLink').href = route('users.profile', { id: currentUser.id });
    ```
  </TabItem>
  
  <TabItem label="Peticiones AJAX">
    ```js
    // Con Fetch API
    fetch(route('api.users.index'))
      .then(response => response.json())
      .then(data => console.log(data));
    
    // Con Axios
    axios.get(route('api.users.show', { user: userId }))
      .then(response => {
        console.log(response.data);
      });
    
    // POST con datos
    axios.post(route('api.users.store'), {
      name: 'Nuevo Usuario',
      email: 'usuario@ejemplo.com'
    });
    ```
  </TabItem>
  
  <TabItem label="Formularios">
    ```js
    // Configurar la acci칩n de un formulario
    document.getElementById('userForm').action = route('users.update', { user: userId });
    
    // Crear un formulario din치micamente
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = route('logout');
    
    // A침adir token CSRF
    const csrfInput = document.createElement('input');
    csrfInput.type = 'hidden';
    csrfInput.name = '_token';
    csrfInput.value = document.querySelector('meta[name="csrf-token"]').content;
    form.appendChild(csrfInput);
    
    // A침adir m칠todo HTTP (para PUT, DELETE, etc.)
    const methodInput = document.createElement('input');
    methodInput.type = 'hidden';
    methodInput.name = '_method';
    methodInput.value = 'DELETE';
    form.appendChild(methodInput);
    
    document.body.appendChild(form);
    form.submit();
    ```
  </TabItem>
</Tabs>

<Aside type="tip">
  <p>Ziggy es especialmente 칰til cuando trabajas con APIs RESTful en Laravel, ya que te permite mantener todas tus rutas organizadas y accesibles de manera consistente tanto en el backend como en el frontend.</p>
</Aside>
