---
title: 8. Administraci√≥n de Usuarios, Permisos y Roles
description: Aprende a gestionar usuarios y sus privilegios en Oracle Database
---

import { Code } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Badge } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';
import { Steps } from '@astrojs/starlight/components';

## Introducci√≥n a la administraci√≥n de usuarios

La administraci√≥n de usuarios, permisos y roles es un aspecto fundamental en la seguridad de Oracle Database. Un sistema de gesti√≥n de usuarios bien dise√±ado permite controlar qui√©n puede acceder a la base de datos y qu√© operaciones puede realizar cada usuario, protegiendo as√≠ la integridad y confidencialidad de los datos.

### Conceptos clave

- **Usuario**: Cuenta que permite el acceso a la base de datos
- **Esquema**: Colecci√≥n de objetos de base de datos (tablas, vistas, procedimientos) asociados a un usuario
- **Privilegio**: Derecho para ejecutar un tipo espec√≠fico de sentencia SQL o acceder a objetos de otro usuario
- **Rol**: Conjunto de privilegios que puede asignarse a usuarios
- **Perfil**: Conjunto de l√≠mites de recursos y pol√≠ticas de contrase√±a

<Aside type="note">
  En Oracle, cada usuario tiene asociado un esquema con el mismo nombre. Sin embargo, es importante entender que un usuario es una cuenta de autenticaci√≥n, mientras que un esquema es un contenedor l√≥gico de objetos de base de datos.
</Aside>

## Creaci√≥n y gesti√≥n de usuarios

### CREATE USER - Creaci√≥n de usuarios

El comando CREATE USER permite crear una nueva cuenta de usuario en la base de datos.

#### Sintaxis b√°sica

```sql
CREATE USER nombre_usuario
  IDENTIFIED BY contrase√±a
  [DEFAULT TABLESPACE nombre_tablespace]
  [TEMPORARY TABLESPACE nombre_tablespace_temp]
  [QUOTA {tama√±o | UNLIMITED} ON nombre_tablespace]
  [PROFILE nombre_perfil]
  [CONTAINER = {CURRENT | ALL}]
  [ACCOUNT {LOCK | UNLOCK}];
```

#### Ejemplos de creaci√≥n de usuarios

<Tabs>
  <TabItem label="Usuario b√°sico">
    ```sql
    -- Crear un usuario con configuraci√≥n m√≠nima
    CREATE USER usuario1 IDENTIFIED BY "Contrase√±a123";
    
    -- Otorgar privilegios m√≠nimos para conectarse
    GRANT CREATE SESSION TO usuario1;
    ```
  </TabItem>
  
  <TabItem label="Usuario con tablespaces">
    ```sql
    -- Crear usuario especificando tablespaces y cuotas
    CREATE USER usuario2 IDENTIFIED BY "Contrase√±a456"
      DEFAULT TABLESPACE users
      TEMPORARY TABLESPACE temp
      QUOTA 100M ON users
      QUOTA 50M ON data;
    
    -- Otorgar privilegios b√°sicos
    GRANT CREATE SESSION TO usuario2;
    ```
  </TabItem>
  
  <TabItem label="Usuario con perfil">
    ```sql
    -- Dos formas de dar permisos en Oracle
    
    -- 1) Roles "cl√°sicos" (r√°pidos)
    GRANT CONNECT, RESOURCE TO usuario3;
    
    -- CONNECT: hoy en d√≠a b√°sicamente equivale a CREATE SESSION (poder conectarse).
    -- RESOURCE: permite crear varios objetos (tablas, procedimientos, triggers, etc.).
    -- Nota: en versiones antiguas inclu√≠a UNLIMITED TABLESPACE; en modernas ya no.
    -- ‚úÖ R√°pido para entornos de pr√°ctica.
    -- ‚ö†Ô∏è Menos control fino (da m√°s de lo que quiz√°s necesitas).
    
    -- 2) Privilegios precisos (recomendado en 12c+)
    -- Otorgas solo lo necesario:
    GRANT CREATE SESSION TO usuario3;        -- conectarse
    GRANT CREATE TABLE TO usuario3;          -- crear tablas
    GRANT CREATE VIEW TO usuario3;           -- crear vistas
    GRANT CREATE SEQUENCE TO usuario3;       -- crear secuencias
    GRANT CREATE PROCEDURE TO usuario3;      -- crear procedimientos/funciones
    GRANT CREATE TRIGGER TO usuario3;        -- crear triggers
    GRANT CREATE TYPE TO usuario3;           -- (opcional) tipos de objeto/colecciones
    GRANT CREATE SYNONYM TO usuario3;        -- (opcional) sin√≥nimos privados
    GRANT CREATE MATERIALIZED VIEW TO usuario3; -- (opcional) MV
    
    -- üî¥ Muy importante: Para crear objetos en un tablespace, adem√°s de los privilegios de creaci√≥n, 
    -- el usuario necesita cuota en el tablespace.
    ALTER USER usuario3 QUOTA UNLIMITED ON users;
    -- o una cuota limitada:
    -- ALTER USER usuario3 QUOTA 200M ON users;
    
    -- üß™ Script recomendado (moderno y completo para desarrollo)
    -- 1) Crear el usuario
    CREATE USER usuario3 IDENTIFIED BY "Contrase√±a789"
      DEFAULT TABLESPACE users
      TEMPORARY TABLESPACE temp
      PROFILE perfil_desarrollo
      ACCOUNT UNLOCK;
    
    -- 2) Permitir conectarse
    GRANT CREATE SESSION TO usuario3;
    
    -- 3) Permisos para crear objetos en su esquema
    GRANT CREATE TABLE, CREATE VIEW, CREATE SEQUENCE,
          CREATE PROCEDURE, CREATE TRIGGER,
          CREATE TYPE, CREATE SYNONYM,
          CREATE MATERIALIZED VIEW
    TO usuario3;
    
    -- 4) MUY IMPORTANTE: dar cuota en el tablespace de datos
    ALTER USER usuario3 QUOTA UNLIMITED ON users;
    -- (o) ALTER USER usuario3 QUOTA 500M ON users;
    ```
  </TabItem>
  
  <TabItem label="Crear usuario DEGUIDEV">
    ```sql
    -- CREAR UNA BASE DE DATOS MATRICULA EN ORACLE
    -- Nombre: DEGUIDEV -- PASO 01
    ALTER SESSION SET "_ORACLE_SCRIPT"=TRUE;
    
    -- PASO 02
    CREATE USER DEGUI IDENTIFIED BY "lipa123456"
    DEFAULT TABLESPACE "USERS"
    TEMPORARY TABLESPACE "TEMP";
    
    -- PASO 03
    ALTER USER DEGUI QUOTA UNLIMITED ON USERS;
    
    -- PASO 04
    GRANT CREATE SESSION TO DEGUI;
    
    -- PASO 05
    GRANT "RESOURCE" TO DEGUI;
    
    -- PASO 06
    ALTER USER DEGUI DEFAULT ROLE "RESOURCE";
    ```
  </TabItem>
</Tabs>

### ALTER USER - Modificaci√≥n de usuarios

El comando ALTER USER permite modificar las propiedades de un usuario existente.

#### Sintaxis b√°sica

```sql
ALTER USER nombre_usuario
  [IDENTIFIED BY nueva_contrase√±a [REPLACE antigua_contrase√±a]]
  [DEFAULT TABLESPACE nombre_tablespace]
  [TEMPORARY TABLESPACE nombre_tablespace_temp]
  [QUOTA {tama√±o | UNLIMITED} ON nombre_tablespace]
  [PROFILE nombre_perfil]
  [DEFAULT ROLE {rol1, rol2... | ALL | ALL EXCEPT rol1, rol2... | NONE}]
  [ACCOUNT {LOCK | UNLOCK}];
```

#### Ejemplos de modificaci√≥n de usuarios

<Tabs>
  <TabItem label="Cambiar contrase√±a">
    ```sql
    -- Cambiar la contrase√±a de un usuario
    ALTER USER usuario1 IDENTIFIED BY "NuevaContrase√±a123";
    
    -- Cambiar contrase√±a con verificaci√≥n de contrase√±a anterior
    ALTER USER usuario1 IDENTIFIED BY "NuevaContrase√±a456" REPLACE "NuevaContrase√±a123";
    ```
  </TabItem>
  
  <TabItem label="Modificar tablespaces y cuotas">
    ```sql
    -- Cambiar el tablespace por defecto
    ALTER USER usuario2 DEFAULT TABLESPACE data;
    
    -- Modificar cuotas
    ALTER USER usuario2 QUOTA UNLIMITED ON data;
    ALTER USER usuario2 QUOTA 200M ON users;
    
    -- Revocar acceso a un tablespace
    ALTER USER usuario2 QUOTA 0 ON temp_data;
    ```
  </TabItem>
  
  <TabItem label="Gestionar estado de la cuenta">
    ```sql
    -- Bloquear una cuenta
    ALTER USER usuario3 ACCOUNT LOCK;
    
    -- Desbloquear una cuenta
    ALTER USER usuario3 ACCOUNT UNLOCK;
    
    -- Cambiar el perfil
    ALTER USER usuario3 PROFILE perfil_produccion;
    
    -- Establecer roles por defecto
    ALTER USER usuario3 DEFAULT ROLE app_user, report_viewer;
    ```
  </TabItem>
</Tabs>

### DROP USER - Eliminaci√≥n de usuarios

El comando DROP USER permite eliminar un usuario de la base de datos.

#### Sintaxis b√°sica

```sql
DROP USER nombre_usuario [CASCADE];
```

#### Ejemplos de eliminaci√≥n de usuarios

```sql
-- Eliminar un usuario sin objetos
DROP USER usuario_temporal;

-- Eliminar un usuario y todos sus objetos
DROP USER usuario_obsoleto CASCADE;
```

<Aside type="caution">
  La opci√≥n CASCADE elimina todos los objetos del esquema del usuario. Esta operaci√≥n no se puede deshacer, por lo que debe utilizarse con extrema precauci√≥n. Considere hacer una copia de seguridad antes de ejecutar este comando.
</Aside>

## Configuraci√≥n de contrase√±as y cuotas

### Pol√≠ticas de contrase√±as

Las pol√≠ticas de contrase√±as se configuran a trav√©s de perfiles de usuario, que definen restricciones y reglas para las contrase√±as.

#### Creaci√≥n y configuraci√≥n de perfiles

```sql
-- Crear un perfil con pol√≠ticas de contrase√±a
CREATE PROFILE perfil_seguro LIMIT
  PASSWORD_LIFE_TIME 60           -- D√≠as de validez de la contrase√±a
  PASSWORD_GRACE_TIME 7           -- D√≠as de gracia tras expiraci√≥n
  PASSWORD_REUSE_TIME 365         -- D√≠as antes de poder reutilizar una contrase√±a
  PASSWORD_REUSE_MAX 5            -- N√∫mero de cambios antes de poder reutilizar
  FAILED_LOGIN_ATTEMPTS 3         -- Intentos fallidos antes de bloqueo
  PASSWORD_LOCK_TIME 1/24         -- Tiempo de bloqueo (1 hora)
  PASSWORD_VERIFY_FUNCTION verify_function_11g; -- Funci√≥n de verificaci√≥n
```

#### Asignaci√≥n de perfiles a usuarios

```sql
-- Asignar perfil a un usuario nuevo
CREATE USER usuario_seguro IDENTIFIED BY "Contrase√±a!123"
  PROFILE perfil_seguro;

-- Asignar perfil a un usuario existente
ALTER USER usuario_existente PROFILE perfil_seguro;
```

#### Funciones de verificaci√≥n de contrase√±as

Oracle proporciona funciones predefinidas para verificar la complejidad de las contrase√±as:

```sql
-- Ver las funciones de verificaci√≥n disponibles
SELECT * FROM dba_source 
  WHERE name LIKE 'VERIFY_FUNCTION%' 
  AND owner = 'SYS';

-- Crear una funci√≥n personalizada de verificaci√≥n
CREATE OR REPLACE FUNCTION mi_verificacion_contrase√±a 
(username VARCHAR2, password VARCHAR2, old_password VARCHAR2) 
RETURN BOOLEAN IS
BEGIN
  -- Verificar longitud m√≠nima
  IF LENGTH(password) < 12 THEN
    RAISE_APPLICATION_ERROR(-20001, 'La contrase√±a debe tener al menos 12 caracteres');
  END IF;
  
  -- Verificar complejidad
  IF NOT REGEXP_LIKE(password, '[A-Z]') THEN
    RAISE_APPLICATION_ERROR(-20002, 'La contrase√±a debe contener al menos una letra may√∫scula');
  END IF;
  
  IF NOT REGEXP_LIKE(password, '[a-z]') THEN
    RAISE_APPLICATION_ERROR(-20003, 'La contrase√±a debe contener al menos una letra min√∫scula');
  END IF;
  
  IF NOT REGEXP_LIKE(password, '[0-9]') THEN
    RAISE_APPLICATION_ERROR(-20004, 'La contrase√±a debe contener al menos un n√∫mero');
  END IF;
  
  IF NOT REGEXP_LIKE(password, '[^A-Za-z0-9]') THEN
    RAISE_APPLICATION_ERROR(-20005, 'La contrase√±a debe contener al menos un car√°cter especial');
  END IF;
  
  -- Verificar que no contenga el nombre de usuario
  IF INSTR(LOWER(password), LOWER(username)) > 0 THEN
    RAISE_APPLICATION_ERROR(-20006, 'La contrase√±a no puede contener el nombre de usuario');
  END IF;
  
  RETURN TRUE;
END;
/

-- Asignar la funci√≥n a un perfil
ALTER PROFILE perfil_seguro LIMIT
  PASSWORD_VERIFY_FUNCTION mi_verificacion_contrase√±a;
```

### Gesti√≥n de cuotas de espacio

Las cuotas controlan la cantidad de espacio que un usuario puede utilizar en cada tablespace.

#### Asignaci√≥n de cuotas

```sql
-- Asignar cuota ilimitada en un tablespace
ALTER USER usuario1 QUOTA UNLIMITED ON users;

-- Asignar cuota espec√≠fica
ALTER USER usuario2 QUOTA 500M ON data;

-- Revocar acceso a un tablespace
ALTER USER usuario3 QUOTA 0 ON marketing_data;
```

#### Monitoreo de uso de espacio

```sql
-- Ver cuotas asignadas a usuarios
SELECT * FROM dba_ts_quotas;

-- Ver uso de espacio por usuario y tablespace
SELECT username, tablespace_name, bytes, max_bytes
FROM dba_ts_quotas
ORDER BY username, tablespace_name;
```

## Asignaci√≥n de privilegios de sistema y de objeto

### Privilegios de sistema

Los privilegios de sistema permiten a los usuarios realizar acciones espec√≠ficas en la base de datos.

#### Tipos de privilegios de sistema

| Categor√≠a | Ejemplos de privilegios |
|-----------|-------------------------|
| Conexi√≥n y sesi√≥n | CREATE SESSION, ALTER SESSION |
| Recursos | CREATE TABLE, CREATE VIEW, CREATE PROCEDURE |
| DBA | ALTER DATABASE, AUDIT SYSTEM, CREATE USER |
| Backup y recuperaci√≥n | BACKUP ANY TABLE, RECOVER ANY TABLE |
| Seguridad | GRANT ANY PRIVILEGE, AUDIT ANY |

#### Asignaci√≥n de privilegios de sistema

```sql
-- Otorgar privilegios individuales
GRANT CREATE SESSION, CREATE TABLE TO usuario1;

-- Otorgar privilegios con opci√≥n de administraci√≥n
GRANT CREATE USER, DROP USER TO administrador WITH ADMIN OPTION;

-- Revocar privilegios
REVOKE CREATE TABLE FROM usuario1;
```

### Privilegios de objeto

Los privilegios de objeto permiten a los usuarios realizar operaciones espec√≠ficas sobre objetos de la base de datos.

#### Tipos de privilegios de objeto

| Objeto | Privilegios disponibles |
|--------|-------------------------|
| TABLE | SELECT, INSERT, UPDATE, DELETE, ALTER, REFERENCES, INDEX |
| VIEW | SELECT, INSERT, UPDATE, DELETE |
| SEQUENCE | SELECT, ALTER |
| PROCEDURE | EXECUTE |
| DIRECTORY | READ, WRITE |

#### Asignaci√≥n de privilegios de objeto

<Tabs>
  <TabItem label="Privilegios b√°sicos">
    ```sql
    -- Otorgar privilegio de lectura en una tabla
    GRANT SELECT ON empleados TO usuario1;
    
    -- Otorgar privilegios m√∫ltiples
    GRANT SELECT, INSERT, UPDATE ON clientes TO usuario2;
    
    -- Otorgar privilegio de ejecuci√≥n
    GRANT EXECUTE ON calcular_salario TO usuario3;
    ```
  </TabItem>
  
  <TabItem label="Privilegios con opciones">
    ```sql
    -- Otorgar con opci√≥n de concesi√≥n
    GRANT SELECT ON productos TO usuario1 WITH GRANT OPTION;
    
    -- Otorgar privilegios en columnas espec√≠ficas
    GRANT UPDATE (nombre, precio) ON productos TO usuario2;
    
    -- Otorgar privilegios a todos los usuarios
    GRANT SELECT ON informacion_publica TO PUBLIC;
    ```
  </TabItem>
  
  <TabItem label="Revocaci√≥n de privilegios">
    ```sql
    -- Revocar un privilegio
    REVOKE DELETE ON clientes FROM usuario1;
    
    -- Revocar todos los privilegios sobre un objeto
    REVOKE ALL ON empleados FROM usuario2;
    
    -- Revocar con cascada
    REVOKE SELECT ON productos FROM usuario1 CASCADE CONSTRAINTS;
    ```
  </TabItem>
</Tabs>

### Consulta de privilegios

```sql
-- Ver privilegios de sistema otorgados a usuarios
SELECT * FROM dba_sys_privs;

-- Ver privilegios de objeto otorgados a usuarios
SELECT * FROM dba_tab_privs;

-- Ver privilegios otorgados al usuario actual
SELECT * FROM session_privs;

-- Ver privilegios de columna
SELECT * FROM dba_col_privs;
```

## Creaci√≥n y administraci√≥n de roles

Los roles son colecciones de privilegios que facilitan la administraci√≥n de seguridad al agrupar privilegios relacionados.

### Creaci√≥n de roles

```sql
-- Crear un rol b√°sico
CREATE ROLE rol_analista;

-- Crear un rol con contrase√±a (requiere autenticaci√≥n)
CREATE ROLE rol_administrador IDENTIFIED BY "RolPassword123";

-- Crear un rol que se autentica externamente
CREATE ROLE rol_externo IDENTIFIED EXTERNALLY;

-- Crear un rol que se autentica globalmente
CREATE ROLE rol_global IDENTIFIED GLOBALLY;
```

### Asignaci√≥n de privilegios a roles

```sql
-- Asignar privilegios de sistema a un rol
GRANT CREATE SESSION, CREATE TABLE, CREATE VIEW TO rol_desarrollador;

-- Asignar privilegios de objeto a un rol
GRANT SELECT ON hr.empleados TO rol_analista;
GRANT SELECT, INSERT, UPDATE ON hr.departamentos TO rol_analista;

-- Asignar un rol a otro rol (jerarqu√≠a de roles)
GRANT rol_analista TO rol_gerente;
```

### Asignaci√≥n de roles a usuarios

```sql
-- Asignar un rol a un usuario
GRANT rol_analista TO usuario1;

-- Asignar m√∫ltiples roles
GRANT rol_desarrollador, rol_tester TO usuario2;

-- Asignar rol con opci√≥n de administraci√≥n
GRANT rol_departamento TO jefe_departamento WITH ADMIN OPTION;
```

### Gesti√≥n de roles

```sql
-- Modificar un rol (cambiar contrase√±a)
ALTER ROLE rol_administrador IDENTIFIED BY "NuevoPassword456";

-- Eliminar la autenticaci√≥n de un rol
ALTER ROLE rol_administrador NOT IDENTIFIED;

-- Eliminar un rol
DROP ROLE rol_temporal;

-- Habilitar/deshabilitar roles para la sesi√≥n actual
SET ROLE rol_analista, rol_reportes;
SET ROLE NONE; -- Deshabilitar todos los roles
SET ROLE ALL; -- Habilitar todos los roles por defecto
```

### Roles predefinidos en Oracle

Oracle proporciona varios roles predefinidos para tareas comunes:

| Rol | Descripci√≥n |
|-----|-------------|
| CONNECT | Privilegios b√°sicos para conectarse a la base de datos |
| RESOURCE | Privilegios para crear objetos en el esquema propio |
| DBA | Todos los privilegios con opci√≥n de administraci√≥n |
| SELECT_CATALOG_ROLE | Acceso de lectura a las vistas del diccionario |
| EXECUTE_CATALOG_ROLE | Privilegios de ejecuci√≥n en paquetes del sistema |
| DELETE_CATALOG_ROLE | Privilegios para eliminar registros en tablas de auditor√≠a |
| EXP_FULL_DATABASE | Privilegios para exportar toda la base de datos |
| IMP_FULL_DATABASE | Privilegios para importar toda la base de datos |

<Aside type="caution">
  El rol DBA otorga privilegios administrativos completos. Debe asignarse con extrema precauci√≥n y solo a administradores de confianza. En entornos de producci√≥n, es mejor crear roles personalizados con privilegios espec√≠ficos en lugar de usar DBA.
</Aside>

### Consulta de informaci√≥n sobre roles

```sql
-- Ver todos los roles de la base de datos
SELECT * FROM dba_roles;

-- Ver privilegios asignados a roles
SELECT * FROM role_sys_privs;
SELECT * FROM role_tab_privs;

-- Ver roles asignados a usuarios
SELECT * FROM dba_role_privs;

-- Ver jerarqu√≠a de roles
SELECT * FROM role_role_privs;

-- Ver roles habilitados en la sesi√≥n actual
SELECT * FROM session_roles;
```

## Buenas pr√°cticas de seguridad en Oracle

### Principios fundamentales

<Steps>
  1. **Principio de privilegio m√≠nimo**
     - Otorgar solo los privilegios necesarios para realizar las tareas requeridas
     - Revisar y auditar peri√≥dicamente los privilegios asignados
  
  2. **Separaci√≥n de deberes**
     - Dividir responsabilidades entre diferentes usuarios
     - Evitar concentrar demasiados privilegios en un solo usuario
  
  3. **Defensa en profundidad**
     - Implementar m√∫ltiples capas de seguridad
     - Combinar seguridad a nivel de base de datos con seguridad a nivel de aplicaci√≥n
  
  4. **Auditor√≠a y monitoreo**
     - Activar auditor√≠a para acciones cr√≠ticas
     - Revisar regularmente los registros de auditor√≠a
</Steps>

### Recomendaciones para la gesti√≥n de usuarios

```sql
-- 1. Bloquear y expirar cuentas por defecto no utilizadas
SELECT username, account_status FROM dba_users 
  WHERE username IN ('SCOTT', 'HR', 'OE', 'SH');

ALTER USER SCOTT ACCOUNT LOCK PASSWORD EXPIRE;

-- 2. Crear usuarios espec√≠ficos para aplicaciones
CREATE USER app_usuario IDENTIFIED BY "AppPassword123"
  DEFAULT TABLESPACE users
  TEMPORARY TABLESPACE temp
  PROFILE app_profile
  QUOTA 500M ON users;

-- 3. Utilizar esquemas proxy para aplicaciones
ALTER USER app_usuario GRANT CONNECT THROUGH webapp_proxy;

-- 4. Implementar autenticaci√≥n externa cuando sea posible
CREATE USER sso_usuario IDENTIFIED GLOBALLY AS 'CN=usuario1,OU=Usuarios,DC=empresa,DC=com';
```

### Recomendaciones para privilegios y roles

```sql
-- 1. Crear roles espec√≠ficos por funci√≥n
CREATE ROLE rol_ventas;
GRANT SELECT ON productos TO rol_ventas;
GRANT SELECT, INSERT, UPDATE ON pedidos TO rol_ventas;
GRANT SELECT, INSERT ON clientes TO rol_ventas;

-- 2. Evitar asignar privilegios directamente a usuarios
-- Incorrecto:
GRANT SELECT ON hr.empleados TO usuario1;

-- Correcto:
CREATE ROLE rol_rrhh;
GRANT SELECT ON hr.empleados TO rol_rrhh;
GRANT rol_rrhh TO usuario1;

-- 3. Limitar el uso de WITH ADMIN OPTION y WITH GRANT OPTION
-- Usar con precauci√≥n:
GRANT rol_departamento TO jefe_departamento WITH ADMIN OPTION;

-- 4. Revocar privilegios innecesarios
REVOKE CREATE ANY TABLE FROM usuario_desarrollo;
```

### Configuraci√≥n de seguridad avanzada

<Tabs>
  <TabItem label="Pol√≠ticas de contrase√±as">
    ```sql
    -- Crear perfil con pol√≠tica de contrase√±as fuerte
    CREATE PROFILE secure_profile LIMIT
      PASSWORD_LIFE_TIME 90
      PASSWORD_GRACE_TIME 7
      PASSWORD_REUSE_TIME 365
      PASSWORD_REUSE_MAX 10
      FAILED_LOGIN_ATTEMPTS 5
      PASSWORD_LOCK_TIME 1/24
      PASSWORD_VERIFY_FUNCTION ora12c_verify_function;
    
    -- Aplicar a todos los usuarios
    ALTER USER usuario1 PROFILE secure_profile;
    ALTER USER usuario2 PROFILE secure_profile;
    ```
  </TabItem>
  
  <TabItem label="Auditor√≠a">
    ```sql
    -- Configurar auditor√≠a unificada
    -- Habilitar auditor√≠a
    AUDIT POLICY admin_actions BY SYSTEM;
    
    -- Crear pol√≠tica de auditor√≠a personalizada
    CREATE AUDIT POLICY data_access_policy
      ACTIONS SELECT ON hr.empleados,
              UPDATE ON hr.salarios,
              DELETE ON hr.empleados;
    
    -- Aplicar pol√≠tica
    AUDIT POLICY data_access_policy BY usuario1, usuario2;
    ```
  </TabItem>
  
  <TabItem label="Cifrado">
    ```sql
    -- Crear llave de cifrado
    CREATE OR REPLACE DIRECTORY cert_dir AS '/oracle/app/wallet';
    
    -- Cifrar columnas sensibles
    ALTER TABLE clientes MODIFY (
      numero_tarjeta ENCRYPT USING 'AES256' NO SALT,
      cvv ENCRYPT
    );
    
    -- Crear √≠ndice en columna cifrada
    CREATE INDEX idx_tarjeta ON clientes(numero_tarjeta) PARAMETERS ('ENCRYPT');
    ```
  </TabItem>
</Tabs>

### Lista de verificaci√≥n de seguridad

<Steps>
  1. **Configuraci√≥n inicial**
     - Cambiar todas las contrase√±as por defecto
     - Bloquear cuentas no utilizadas
     - Implementar perfiles de seguridad
  
  2. **Gesti√≥n de usuarios**
     - Crear usuarios espec√≠ficos para cada prop√≥sito
     - Implementar pol√≠tica de contrase√±as robusta
     - Revisar peri√≥dicamente las cuentas inactivas
  
  3. **Privilegios y roles**
     - Aplicar principio de privilegio m√≠nimo
     - Utilizar roles para agrupar privilegios
     - Auditar privilegios cr√≠ticos
  
  4. **Monitoreo y auditor√≠a**
     - Configurar auditor√≠a para acciones cr√≠ticas
     - Revisar regularmente los registros de auditor√≠a
     - Implementar alertas para actividades sospechosas
  
  5. **Mantenimiento**
     - Aplicar parches de seguridad regularmente
     - Realizar evaluaciones de seguridad peri√≥dicas
     - Documentar pol√≠ticas y procedimientos de seguridad
</Steps>

### Consultas √∫tiles para auditor√≠a de seguridad

```sql
-- Usuarios con el rol DBA
SELECT grantee FROM dba_role_privs WHERE granted_role = 'DBA';

-- Usuarios con privilegios cr√≠ticos
SELECT grantee, privilege FROM dba_sys_privs 
WHERE privilege IN ('ALTER DATABASE', 'ALTER SYSTEM', 'CREATE ANY JOB');

-- Cuentas con contrase√±as por defecto
SELECT username, account_status FROM dba_users 
WHERE password_versions NOT LIKE '%12%';

-- Usuarios con cuotas ilimitadas
SELECT username, tablespace_name FROM dba_ts_quotas 
WHERE max_bytes = -1;

-- Objetos con privilegios concedidos a PUBLIC
SELECT owner, table_name, privilege FROM dba_tab_privs 
WHERE grantee = 'PUBLIC';
```

<Aside type="tip">
  Considere implementar Oracle Database Vault para proporcionar controles de acceso adicionales y separaci√≥n de deberes, especialmente en entornos con requisitos de cumplimiento normativo estrictos como PCI DSS, HIPAA o GDPR.
</Aside>
